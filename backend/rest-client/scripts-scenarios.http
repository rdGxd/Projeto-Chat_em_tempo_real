# ============================================
# üé¨ CEN√ÅRIOS DE TESTE ESPEC√çFICOS
# ============================================

@baseUrl = http://localhost:3001

# ============================================
# üî• CEN√ÅRIO A: FLUXO DE ONBOARDING COMPLETO
# ============================================

### [CEN√ÅRIO A - 1] Registrar Usu√°rio
# @name scenarioA_register
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "name": "Jo√£o Silva",
  "email": "joao_{{$timestamp}}@empresa.com",
  "password": "joao123"
}

### [CEN√ÅRIO A - 2] Fazer Login
# @name scenarioA_login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "joao_{{$timestamp}}@empresa.com",
  "password": "joao123"
}

### [CEN√ÅRIO A - 3] Visualizar Perfil
# @name scenarioA_profile
GET {{baseUrl}}/user/profile
Content-Type: application/json
Authorization: Bearer {{scenarioA_login.response.body.accessToken}}

### [CEN√ÅRIO A - 4] Buscar Salas Dispon√≠veis
# @name scenarioA_rooms
GET {{baseUrl}}/room
Content-Type: application/json
Authorization: Bearer {{scenarioA_login.response.body.accessToken}}

### [CEN√ÅRIO A - 5] Entrar na Primeira Sala
# @name scenarioA_joinRoom
GET {{baseUrl}}/room/1
Content-Type: application/json
Authorization: Bearer {{scenarioA_login.response.body.accessToken}}

# ============================================
# üíº CEN√ÅRIO B: FLUXO DE ADMINISTRA√á√ÉO
# ============================================

### [CEN√ÅRIO B - 1] Login como Admin
# @name scenarioB_adminLogin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@empresa.com",
  "password": "admin123"
}

### [CEN√ÅRIO B - 2] Criar Nova Sala VIP
# @name scenarioB_createVipRoom
POST {{baseUrl}}/room
Content-Type: application/json
Authorization: Bearer {{scenarioB_adminLogin.response.body.accessToken}}

{
  "name": "Sala VIP - Ger√™ncia {{$timestamp}}"
}

### [CEN√ÅRIO B - 3] Configurar Sala (Atualizar)
# @name scenarioB_configureRoom
PUT {{baseUrl}}/room/{{scenarioB_createVipRoom.response.body.id}}
Content-Type: application/json
Authorization: Bearer {{scenarioB_adminLogin.response.body.accessToken}}

{
  "name": "Sala VIP - Configurada {{$timestamp}}"
}

### [CEN√ÅRIO B - 4] Enviar An√∫ncio na Sala
# @name scenarioB_announcement
POST {{baseUrl}}/message
Content-Type: application/json
Authorization: Bearer {{scenarioB_adminLogin.response.body.accessToken}}

{
  "content": "üîî AN√öNCIO: Esta √© uma sala VIP para discuss√µes estrat√©gicas - {{$timestamp}}",
  "room": "{{scenarioB_createVipRoom.response.body.id}}"
}

### [CEN√ÅRIO B - 5] Listar Todas as Mensagens da Sala
# @name scenarioB_listMessages
GET {{baseUrl}}/message?roomId={{scenarioB_createVipRoom.response.body.id}}
Content-Type: application/json
Authorization: Bearer {{scenarioB_adminLogin.response.body.accessToken}}

# ============================================
# üöÄ CEN√ÅRIO C: SIMULA√á√ÉO DE CHAT ATIVO
# ============================================

### [CEN√ÅRIO C - 1] Login User 1
# @name scenarioC_user1Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user1@chat.com",
  "password": "user123"
}

### [CEN√ÅRIO C - 2] Login User 2
# @name scenarioC_user2Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user2@chat.com",
  "password": "user123"
}

### [CEN√ÅRIO C - 3] User 1 Cria Sala de Chat
# @name scenarioC_createChatRoom
POST {{baseUrl}}/room
Content-Type: application/json
Authorization: Bearer {{scenarioC_user1Login.response.body.accessToken}}

{
  "name": "Chat Ativo - {{$timestamp}}"
}

### [CEN√ÅRIO C - 4] User 1 Envia Primeira Mensagem
# @name scenarioC_user1Message1
POST {{baseUrl}}/message
Content-Type: application/json
Authorization: Bearer {{scenarioC_user1Login.response.body.accessToken}}

{
  "content": "Ol√°! Algu√©m online? üëã",
  "room": "{{scenarioC_createChatRoom.response.body.id}}"
}

### [CEN√ÅRIO C - 5] User 2 Responde
# @name scenarioC_user2Message1
POST {{baseUrl}}/message
Content-Type: application/json
Authorization: Bearer {{scenarioC_user2Login.response.body.accessToken}}

{
  "content": "Oi! Sim, estou aqui! üòä",
  "room": "{{scenarioC_createChatRoom.response.body.id}}"
}

### [CEN√ÅRIO C - 6] User 1 Continua Conversa
# @name scenarioC_user1Message2
POST {{baseUrl}}/message
Content-Type: application/json
Authorization: Bearer {{scenarioC_user1Login.response.body.accessToken}}

{
  "content": "Que bom! Como voc√™ est√° hoje?",
  "room": "{{scenarioC_createChatRoom.response.body.id}}"
}

### [CEN√ÅRIO C - 7] User 2 Responde Novamente
# @name scenarioC_user2Message2
POST {{baseUrl}}/message
Content-Type: application/json
Authorization: Bearer {{scenarioC_user2Login.response.body.accessToken}}

{
  "content": "Estou bem, obrigado! E voc√™? üôÇ",
  "room": "{{scenarioC_createChatRoom.response.body.id}}"
}

# ============================================
# üîí CEN√ÅRIO D: TESTES DE SEGURAN√áA
# ============================================

### [CEN√ÅRIO D - 1] Tentativa de Acesso Sem Token
# @name scenarioD_noAuth
GET {{baseUrl}}/room
Content-Type: application/json

### [CEN√ÅRIO D - 2] Tentativa com Token Expirado/Inv√°lido
# @name scenarioD_invalidAuth
GET {{baseUrl}}/room
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.invalid.token

### [CEN√ÅRIO D - 3] Tentativa de SQL Injection no Login
# @name scenarioD_sqlInjection
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@empresa.com'; DROP TABLE users; --",
  "password": "any"
}

### [CEN√ÅRIO D - 4] Tentativa de XSS na Mensagem
# @name scenarioD_xssAttempt
POST {{baseUrl}}/message
Content-Type: application/json
Authorization: Bearer {{scenarioA_login.response.body.accessToken}}

{
  "content": "<script>alert('XSS Test')</script>",
  "room": "1"
}

### [CEN√ÅRIO D - 5] Teste de Rate Limiting (M√∫ltiplas Requisi√ß√µes)
# @name scenarioD_rateLimiting1
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@test.com",
  "password": "wrong"
}

### [CEN√ÅRIO D - 6] Teste de Rate Limiting 2
# @name scenarioD_rateLimiting2
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@test.com",
  "password": "wrong"
}

### [CEN√ÅRIO D - 7] Teste de Rate Limiting 3
# @name scenarioD_rateLimiting3
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@test.com",
  "password": "wrong"
}
